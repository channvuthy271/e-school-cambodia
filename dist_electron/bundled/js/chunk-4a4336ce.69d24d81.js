(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a4336ce"],{"3f82":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"px-5 pt-5"},[t.loadingEbook?t._e():i("div",{staticClass:"flex font-khmer_os text-14px mb-4"},[i("div",{staticClass:"cursor-pointer bg-gray-200  rounded-full px-2 py-1 mr-3 border border-gray-300 hover:bg-gray-300",class:""===t.member_id?"bg-gray-300":"",on:{click:function(e){return t.filterBook("")}}},[t._v(" សៀវភៅ ")]),t._l(t.bookNav,(function(e,s){return i("div",{key:s,staticClass:"cursor-pointer bg-gray-200  rounded-full px-2 py-1 mr-3 border border-gray-300 hover:bg-gray-300",class:t.member_id===e._id?"bg-gray-300":"",on:{click:function(i){return t.filterBook(e._id)}}},[t._v(" "+t._s(e.title)+" ")])}))],2),t.loadingEbookCourse?i("div",{staticClass:"flex justify-center items-center h-screen relative -top-5"},[i("h1",{staticClass:"text-sm font-semibold font-khmer_os relative -top-28"},[i("loading")],1)]):i("div",{staticClass:"h-screen pb-36"},[t.ebookCourses.length<=0?i("div",{staticClass:"h-screen flex justify-center items-center"},[i("img",{staticClass:"w-64  mb-5 relative -top-28",attrs:{src:"/icon/Empty/Empty.svg"}})]):t._e(),i("div",{staticClass:"grid grid-cols-6 gap-4 font-khmer_os pt-2 overflow-y-scroll h-full",attrs:{id:"feed"},on:{scroll:t.onScroll}},t._l(t.ebookCourses,(function(e,s){return i("div",{key:s},[i("div",{staticClass:"cursor-pointer relative",class:s===t.ebookCourses.length-1?"pb-16":""},[e.is_new?i("div",{staticClass:"absolute right-0 top-0"},[i("img",{staticClass:"w-10",staticStyle:{"margin-top":"-8px","margin-right":"-8px"},attrs:{src:"/icon/New/New.png"}})]):t._e(),i("img",{staticClass:"cursor-pointer",attrs:{src:e.thumbnail},on:{click:function(i){return t.openView(e)}}}),""===t.member_id?i("div",{staticClass:"flex justify-between items-center mt-4 w-full px-2"},[i("div",{staticClass:"text-14px",on:{click:function(i){return t.openView(e)}}},[0===e.price.year?i("div",[t._v("មិនគិតថ្លៃ")]):i("div",[t._v("តម្លៃ "),i("del",[t._v("$"+t._s(e.price.discount))]),i("span",{staticClass:"text-red-500"},[t._v(" $"+t._s(e.price.year))])])]),t.inCart(e._id)?t._e():[e.price.year&&!e.is_in_cart?i("div",{on:{click:function(i){return t.addToCart(e._id)}}},[i("CartIcon",{attrs:{width:18,height:18,fill:"#F3F4F6"}})],1):t._e()]],2):t._e()])])})),0)]),t.showView?i("ViewBook",{attrs:{view:t.bookView,loading:t.loading,cartId:t.cartId},on:{closeView:t.closeView,read:function(e){return t.read(e)},buyingRead:function(e){return t.buyingRead(e)}}}):t._e(),t.showReading?i("ReadingBook",{attrs:{books:t.bookReading},on:{closeReading:t.closeReading,buyingRead:function(e){return t.buyingRead(e)}}}):t._e(),t.showingCart?i("Cart",{on:{closeCart:t.closeCart}}):t._e()],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fixed z-50 inset-0 overflow-y-auto"},[i("div",{staticClass:"flex items-end justify-center min-h-screen text-center sm:block sm:p-0"},[t._m(0),i("span",{staticClass:"hidden sm:inline-block sm:align-middle sm:h-screen",attrs:{"aria-hidden":"true"}},[t._v("​")]),i("div",{staticClass:"inline-block align-bottom bg-white rounded text-left overflow-hidden shadow-xl transform transition-all  sm:align-middle",class:"w-"+t.size,attrs:{role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"}},[i("div",{staticClass:"bg-white font-khmer_os relative"},[i("div",{staticClass:"flex-cols items-center"},[i("div",{staticClass:"flex justify-between items-center p-5"},[i("div",{staticClass:"flex-1 text-center"},[t._v(t._s(t.view.title))]),i("div",{staticClass:"cursor-pointer opacity-60",on:{click:t.closeView}},[i("CloseIcon",{attrs:{width:20,height:20}})],1)]),i("div",{staticClass:"relative pb-10",staticStyle:{"max-height":"600px","overflow-y":"scroll"}},[i("div",{staticClass:"bg-black py-5 relative"},[i("img",{staticClass:"m-auto",staticStyle:{"max-width":"50%"},attrs:{src:t.view.thumbnail}}),t.alreadyInCart(t.view._id)||t.view.is_in_cart?t._e():[0!==t.view.is_buy?i("div",{staticClass:"absolute bottom-5 right-5 bg-white rounded py-1 px-2 cursor-pointer opacity-80 hover:opacity-100",on:{click:function(e){return t.addToCart(t.view._id)}}},[i("CartIcon",{attrs:{width:20,height:20}})],1):t._e()]],2),i("div",{staticClass:"text-center text-custom p-2 font-medium cursor-pointer flex justify-center items-center",on:{click:function(e){return t.read(t.view._id,t.view.title)}}},[t._v(" អាន "),t.loading?i("img",{staticClass:"ml-2",attrs:{src:"/ajax-loader.gif"}}):t._e()]),i("hr"),i("div",{staticClass:"p-5"},[i("p",[t._v(t._s(t.view.title))]),i("p",[t._v("ម្ចាស់សៀវភៅ៖ "+t._s(t.view.teacher.name))]),i("p",{staticClass:"mt-5 mr-5 text-13px",staticStyle:{"white-space":"pre-wrap"},domProps:{innerHTML:t._s(t.view.des)}})])])]),t.view.price.year?i("button",{staticClass:"fixed bottom-0 bg-blue w-full p-3 bg-custom text-center text-white cursor-pointer focus:outline-none",attrs:{disabled:t.loadingCart},on:{click:function(e){return t.addToCart(t.view._id)}}},[i("span",{domProps:{textContent:t._s(t.view.is_buy?"បន្តសុពលភាព":"ទិញ")}}),t._v(" "),t.loadingCart?i("span",[i("Loader",{attrs:{size:10}})],1):t._e()]):t._e()])])])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fixed inset-0 transition-opacity",attrs:{"aria-hidden":"true"}},[i("div",{staticClass:"absolute inset-0 bg-gray-500 opacity-75"})])}],n=i("33d6"),d=i("2c5f"),c=i("2f62"),l=i("555f"),h={name:"ViewBook",components:{CloseIcon:n["a"],CartIcon:d["a"],Loader:l["a"]},props:{cartId:{type:String,default:()=>""},loading:{type:Boolean,default:function(){return!1}},view:{type:Object},size:{type:Number,default:()=>96},hide:{type:Boolean,default:function(){return!1}}},computed:{...Object(c["c"])("cart",["loadingCart","cart"])},methods:{...Object(c["b"])("cart",["addCart","getCart"]),addToCart(t){this.addCart(t).then(()=>{this.$emit("buyingRead",t),this.getCart()})},closeView(t){this.$emit("closeView",t)},read(t,e){this.$emit("read",{id:t,title:e})},showCart(t){this.$emit("showCart",t)},alreadyInCart(t){for(let e=0;e<this.cart.list.length;e++)if(this.cart.list[e]._id===t)return!0;return!1}},created(){this.getCart()}},u=h,g=i("2877"),b=Object(g["a"])(u,r,o,!1,null,null,null),w=b.exports,m=i("bc28"),p=i("fae0"),C=i("3a5e"),f={name:"Book",components:{CartIcon:d["a"],ViewBook:w,ReadingBook:m["a"],Cart:p["a"],Loading:C["a"]},data(){return{window:{width:0,height:0},showView:!1,showReading:!1,showingCart:!1,bookView:"",page:1,member_id:"",loading:!1,bookReading:"",title:"",cartId:"",noResult:!1}},computed:{...Object(c["c"])("course",["loadingEbook","bookNav","loadingEbookCourse","ebookCourses"]),...Object(c["c"])("cart",["cartAdded"]),query:{get(){return this.$store.state.course.s},set(t){return t}},gradeID:{get(){return this.$store.state.course.gradeID},set(t){return t}}},methods:{...Object(c["b"])("course",["getEbook","getCourseEbook","getCourseEbookPagination","readBook","setLessonTitle"]),...Object(c["b"])("cart",["addCart","cartAlert"]),handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},closeReading(){this.showReading=!1},filterBook(t){this.page=1,this.member_id=t,this.getCourseEbook({page:this.page,member_id:t})},addToCart(t){this.cartId=t,this.addCart(t).then(()=>{this.cartAlert(t)})},inCart(t){if(this.cartAdded&&this.cartAdded.length)for(let e=0;e<this.cartAdded.length;e++)if(this.cartAdded[e]===t)return!0;return!1},read(t){this.title=t.title,this.setLessonTitle(this.title),this.loading=!0,this.readBook({course_id:t.id,order:""}).then(t=>{this.bookReading=t,this.loading=!1,this.showView=!1,this.showReading=!0})},buyingRead(){this.showView=!1,this.showingCart=!0,this.showReading=!1},closeCart(){this.showingCart=!1},closeView(){this.showView=!1},openView(t){this.bookView=t,this.showView=!0},onScroll({target:{scrollTop:t,clientHeight:e,scrollHeight:i}}){t+e>=i&&(this.page++,this.noResult||this.getCourseEbookPagination({page:this.page,member_id:this.member_id}).then(t=>{t.length<=0&&(this.noResult=!0)}))}},destroyed(){window.removeEventListener("resize",this.handleResize)},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.getEbook(this.page).then(()=>{this.getCourseEbook({page:this.page,member_id:""})})},watch:{query:function(){this.getCourseEbook({page:this.page,member_id:this.member_id})},gradeID:function(){this.getCourseEbook({page:this.page,member_id:this.member_id})}}},v=f,_=(i("99d4"),Object(g["a"])(v,s,a,!1,null,null,null));e["default"]=_.exports},"60c6":function(t,e,i){},"99d4":function(t,e,i){"use strict";i("60c6")}}]);
//# sourceMappingURL=chunk-4a4336ce.69d24d81.js.map