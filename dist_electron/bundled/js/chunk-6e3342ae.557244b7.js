(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e3342ae"],{"0649":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-5 flex font-khmer_os"},[i("div",{staticClass:"w-3/5 pr-5"},[i("MediaPlayer",{attrs:{url:"file:///"+t.defaultVideo.url,last_watch:t.last_watch},on:{onPlayerEnded:t.onPlayerEnded,previousVideo:t.previousVideo,lastWatchVideo:function(e){return t.lastWatchVideo(e)}}}),i("div",{staticClass:"mt-3 text-14px font-semibold"},[t._v(t._s(t.defaultVideo.title))]),i("div",{staticClass:"text-gray-400 text-14px font-khmer_os"},[t._v(t._s(t.defaultVideo.course.teacher.name))])],1),i("div",{staticClass:"w-2/5 bg-white h-screen border border-gray-200 h-screen"},[i("div",{staticClass:"overflow-y-scroll pt-5 pb-20",staticStyle:{height:"91vh"}},t._l(t.downloadDetails,(function(e,s){return i("div",{key:s,staticClass:"relative flex items-center cursor-pointer",class:t.defaultVideo._id===e._id?"bg-gray-300 py-2":" py-1"},[t.order==e.order?i("div",{staticClass:"absolute left-0 h-full flex justify-center items-center pl-3",attrs:{id:"vdActive"}},[i("IconPlayActive")],1):t._e(),i("div",{staticClass:"relative ml-7"},[i("img",{staticClass:"w-40",attrs:{src:t.getPathFromUrl(e.thumbnail),alt:"",id:e.video_youtube},on:{click:function(i){return t.nextOrder(e,s)}}}),e.last_watch?i("input",{staticClass:"w-40 percentage cursor-default absolute bottom-0 left-0",style:t.lastWatchMark(e.last_watch.percentage),attrs:{type:"range",min:"0",max:"100",value:"100",step:"1",id:e._id}}):t._e()]),i("div",{staticClass:"flex-1 font-khmer_os text-sm pl-3",attrs:{title:e.title},on:{click:function(i){return t.nextOrder(e,s)}}},[i("div",{staticClass:"flex-cols"},[i("p",{domProps:{innerHTML:t._s(s+1+","+t.cutString(e.title,t.window.width<=1366?25:55))}}),i("div",{staticClass:"mt-3 text-14px text-gray-500 flex"},[i("div",{staticClass:"opacity-60"},[i("ViewIcon")],1),i("span",{staticClass:"pl-1"},[t._v(t._s(t.kFormatter(e.view)))])])])]),i("div",{staticClass:"pr-3 cursor-pointer",on:{click:function(i){return t.askForRemove(e)}}},[i("CloseIcon",{attrs:{width:22,height:22,fill:"#DC2626"}})],1)])})),0)]),t.showConfirm?i("MessageConfirm",{on:{closeConfirm:t.closeConfirm,confirmDelete:t.confirmDelete}}):t._e()],1)},o=[],r=i("2f62"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-cols start items-center w-full relative",attrs:{id:"video_player_box"}},[t.LoadingWhiteSuccess?[t.loadingVideo?i("div",{staticClass:"absolute top-0 left-0 w-full h-full flex justify-center items-center text-center z-20 bg-black bg-opacity-0",style:{height:t.video.height+"px"}}):t._e(),i("div",{staticClass:"bg-black"},[i("video",{ref:"my_download",staticClass:"m-auto w-full",style:{height:t.video.height+"px",width:"100%"},attrs:{id:"my_download",autoplay:"autoplay",controlsList:"nodownload"},on:{timeupdate:function(e){return t.timeUpdate()},ended:function(e){return t.onEnded()},pause:function(e){return t.pause()},click:function(e){return t.playPause()}}},[i("source",{attrs:{src:t.url,type:"video/mp4"}})])]),i("div",{staticClass:"absolute w-full left-0 bottom-0 py-5 control bg-gradient-to-t from-gray-900 z-50",class:t.loadingVideo?"opacity-0":""},[i("div",{staticClass:"px-5"},[i("input",{ref:"seekSlider",staticClass:"w-full seekSlider",attrs:{type:"range",min:"0",max:"100",id:"seekSlider",value:"0",step:"1"}})]),i("div",{staticClass:"flex justify-between items-center"},[i("div",{staticClass:"flex justify-start px-5 pt-2"},[i("button",{staticClass:"bg-transparent focus:outline-none mr-5 transform rotate-180",on:{click:function(e){return t.previousVideo()}}},[i("NextIcon")],1),i("button",{staticClass:"bg-transparent focus:outline-none mr-5",attrs:{id:"playPauseBtn"},on:{click:function(e){return t.playPause()}}},[t.showPlay?i("PlayIcon"):i("PauseIcon")],1),i("button",{staticClass:"bg-transparent focus:outline-none mr-5",on:{click:function(e){return t.nextVideo()}}},[i("NextIcon")],1),i("button",{staticClass:"mr-3 bg-transparent focus:outline-none",attrs:{id:"muteBtn"},on:{click:function(e){return t.vidMute()}}},[t.muted?i("MutedIcon"):i("SoundIcon")],1),t._m(0),i("div",{staticClass:"w-20"},[i("input",{attrs:{id:"volumeSlider",type:"range",min:"0",max:"100",value:"100",step:"1"},on:{change:function(e){return t.setVolume(e)}}})])]),i("div",{staticClass:"flex justify-start items-center px-5 relative"},[i("div",{staticClass:"mr-5"},[i("div",{staticClass:"cursor-pointer mt-2",on:{click:function(e){return t.showOptionTool()}}},[i("SettingIcon")],1),i("div",{staticClass:"absolute bg-white text-black text-14px font-khmer_os w-44 text-center right-5 -top-46 rounded shadow"},[t.showOption?i("ul",[i("li",{staticClass:"border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-10 leading-10 font-13px text-gray-500"},[t._v(" ការកំណត់ ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9 text-blue-500",on:{click:function(e){return t.chooseOption(2)}}},[t._v(" ល្បឿន ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9 text-blue-500",on:{click:function(e){return t.chooseOption(1)}}},[t._v(" កំរិត ")]),i("li",{staticClass:"cursor-pointer h-10 leading-10 text-red-500 font-semibold",on:{click:function(e){return t.cancel()}}},[t._v(" បោះបង់ ")])]):t._e()]),i("div",{staticClass:"absolute bg-white text-black text-14px font-khmer_os w-44 text-center right-5 -top-64 rounded text-blue-500 shadow"},[t.showSpeed?i("ul",[i("li",{staticClass:"border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-10 leading-10 font-13px text-gray-500"},[t._v(" ល្បឿន ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9",class:t.defaultSpeed<1?"text-red-500":"",on:{click:function(e){return t.playbackRate(.5)}}},[t._v(" 0.5x ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9",class:1===t.defaultSpeed?"text-red-500":"",on:{click:function(e){return t.playbackRate(1)}}},[t._v(" 1.0x ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9",class:t.defaultSpeed>1&&t.defaultSpeed<2?"text-red-500":"",on:{click:function(e){return t.playbackRate(1.5)}}},[t._v(" 1.5x ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9",class:2===t.defaultSpeed?"text-red-500":"",on:{click:function(e){return t.playbackRate(2)}}},[t._v(" 2.0x ")]),i("li",{staticClass:"cursor-pointer h-10 leading-10 text-red-500 font-semibold",on:{click:function(e){return t.cancelOption()}}},[t._v(" បោះបង់ ")])]):t._e()]),i("div",{staticClass:"absolute bg-white text-black text-14px font-khmer_os w-44 text-center right-5 -top-46 rounded shadow"},[t.showQuality?i("ul",[i("li",{staticClass:"border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-10 leading-10 font-13px text-gray-500"},[t._v(" កំរិត ")]),i("li",{staticClass:"cursor-pointer border border-l-0 border -l-0 border-r-0 border-t-0 border-gray-200 h-9 leading-9 text-custom ",on:{click:function(e){return t.changeQuality()}}},[t._v(" ឯកសារទាញយក ")]),i("li",{staticClass:"cursor-pointer h-10 leading-10 text-red-500 font-semibold",on:{click:function(e){return t.cancelOption()}}},[t._v(" បោះបង់ ")])]):t._e()])]),i("div",{staticClass:"cursor-pointer mt-2",attrs:{id:"fullScreenBtn"},on:{click:function(e){return t.toggleFullScreen()}}},[i("FullScreenIcon")],1)])])])]:[i("div",{staticClass:"w-full flex-cols justify-center items-center"},[i("video",{staticClass:"m-auto w-full bg-black",style:{height:t.video.height+"px"},attrs:{id:"no_video"}},[i("source",{attrs:{src:""}})]),i("div",{staticClass:"absolute top-0 left-0 w-full h-full flex justify-center items-center text-center",style:{height:t.video.height+"px"}},[i("div",[i("LoadingWhite")],1)])])]],2)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-white mr-3 flex"},[i("span",{attrs:{id:"currentTime"}}),i("span",{attrs:{id:"currentDuration"}})])}],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticStyle:{fill:"#000000"},attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"22",height:"22",viewBox:"0 0 172 172"}},[i("g",{staticStyle:{"mix-blend-mode":"normal"},attrs:{fill:"none","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none"}},[i("path",{attrs:{d:"M0,172v-172h172v172z",fill:"none"}}),i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M28.66667,14.33333v143.33333l124.07292,-71.66667z"}})])])])},d=[],c={name:"PlayIcon"},h=c,u=i("2877"),f=Object(u["a"])(h,a,d,!1,null,null,null),m=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticStyle:{fill:"#000000"},attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"22",height:"22",viewBox:"0 0 172 172"}},[i("g",{staticStyle:{"mix-blend-mode":"normal"},attrs:{fill:"none","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none"}},[i("path",{attrs:{d:"M0,172v-172h172v172z",fill:"none"}}),i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M41.28,27.52v116.96h34.4v-116.96zM96.32,27.52v116.96h34.4v-116.96z"}})])])])},w=[],g={name:"PauseIcon"},p=g,b=Object(u["a"])(p,v,w,!1,null,null,null),y=b.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"}},[i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M19 12l-18 12v-24l18 12zm4-11h-4v22h4v-22z"}})])])},k=[],_={name:"NextIcon"},S=_,V=Object(u["a"])(S,x,k,!1,null,null,null),C=V.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticStyle:{fill:"#000000"},attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"22",height:"22",viewBox:"0 0 172 172"}},[i("g",{staticStyle:{"mix-blend-mode":"normal"},attrs:{fill:"none","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none"}},[i("path",{attrs:{d:"M0,172v-172h172v172z",fill:"none"}}),i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M83.205,10.32c-3.13094,0 -6.38281,1.505 -9.03,4.1925l-39.99,39.8825c-2.20375,1.94844 -3.225,5.72438 -3.225,8.385v46.44c0,2.63375 1.08844,6.39625 3.1175,8.17l39.8825,39.775c3.62813,3.69531 6.97406,4.515 9.1375,4.515c5.73781,0 9.7825,-5.24062 9.7825,-12.685v-127.28c0,-7.83406 -5.02562,-11.395 -9.675,-11.395zM10.32,54.9325c-5.76469,0 -10.4275,4.66281 -10.4275,10.4275v41.28c0,5.76469 4.66281,10.4275 10.4275,10.4275h15.3725c-1.12875,-2.70094 -1.6125,-5.57656 -1.6125,-7.8475v-46.44c0,-2.2575 0.56438,-5.11969 1.72,-7.8475zM109.7575,65.2525c-0.14781,0.02688 -0.29562,0.06719 -0.43,0.1075c-1.29,0.22844 -2.32469,1.16906 -2.6875,2.41875c-0.36281,1.26313 0.01344,2.60688 0.9675,3.49375l14.7275,14.7275l-14.7275,14.7275c-1.37062,1.37063 -1.37062,3.57438 0,4.945c1.37063,1.37063 3.57438,1.37063 4.945,0l14.7275,-14.7275l14.7275,14.7275c1.37063,1.37063 3.57438,1.37063 4.945,0c1.37063,-1.37062 1.37063,-3.57437 0,-4.945l-14.7275,-14.7275l14.7275,-14.7275c1.11531,-1.03469 1.41094,-2.67406 0.73906,-4.03125c-0.65844,-1.37062 -2.15,-2.12312 -3.64156,-1.88125c-0.76594,0.08063 -1.49156,0.43 -2.0425,0.9675l-14.7275,14.7275l-14.7275,-14.7275c-0.71219,-0.76594 -1.74687,-1.15562 -2.795,-1.075z"}})])])])},z=[],M={name:"MutedIcon"},D=M,O=Object(u["a"])(D,I,z,!1,null,null,null),E=O.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticStyle:{fill:"#000000"},attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20",height:"20",viewBox:"0 0 172 172"}},[i("g",{staticStyle:{"mix-blend-mode":"normal"},attrs:{fill:"none","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none"}},[i("path",{attrs:{d:"M0,172v-172h172v172z",fill:"none"}}),i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M91.53625,6.88c-2.28437,0 -4.48812,0.9675 -6.03344,2.63375l-44.22281,45.52625v61.92l44.22281,45.52625c1.54531,1.67969 3.74906,2.63375 6.03344,2.63375c4.52844,0 8.22375,-3.69531 8.22375,-8.22375v-141.7925c0,-4.52844 -3.69531,-8.22375 -8.22375,-8.22375zM136.55188,35.85125l-3.85656,5.68406c15.25156,8.96281 25.54469,25.51781 25.54469,44.46469c0,18.94688 -10.29312,35.50188 -25.54469,44.46469l3.85656,5.68406c17.07906,-10.2125 28.56812,-28.83687 28.56812,-50.14875c0,-21.31187 -11.48906,-39.93625 -28.56812,-50.14875zM124.95531,52.90344l-3.89688,5.72438c9.82281,5.20031 16.54156,15.50687 16.54156,27.37219c0,11.86531 -6.71875,22.17188 -16.54156,27.37219l3.89688,5.72438c11.63687,-6.47688 19.52469,-18.86625 19.52469,-33.09656c0,-14.23031 -7.88781,-26.61969 -19.52469,-33.09656zM17.2,55.04c-5.68406,0 -10.32,4.63594 -10.32,10.32v41.28c0,5.68406 4.63594,10.32 10.32,10.32h17.2v-61.92zM113.25125,70.13031l-4.01781,5.92594c4.43438,1.15563 7.72656,5.14656 7.72656,9.94375c0,4.79719 -3.29219,8.78813 -7.72656,9.94375l4.01781,5.92594c6.20813,-2.60687 10.58875,-8.73437 10.58875,-15.86969c0,-7.13531 -4.38062,-13.27625 -10.58875,-15.86969z"}})])])])},R=[],B={name:"SoundIcon"},T=B,W=Object(u["a"])(T,P,R,!1,null,null,null),j=W.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"}},[i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"}})])])},L=[],F={name:"SettingIcon"},Q=F,N=Object(u["a"])(Q,$,L,!1,null,null,null),q=N.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"}},[i("g",{attrs:{fill:"#ffffff"}},[i("path",{attrs:{d:"M24 9h-4v-5h-5v-4h9v9zm-9 15v-4h5v-5h4v9h-9zm-15-9h4v5h5v4h-9v-9zm9-15v4h-5v5h-4v-9h9z"}})])])},H=[],U={name:"FullScreenIcon"},A=U,G=Object(u["a"])(A,J,H,!1,null,null,null),K=G.exports,X=i("4dc6"),Y={name:"MediaPlayer",components:{PlayIcon:m,SettingIcon:q,SoundIcon:j,PauseIcon:y,NextIcon:C,MutedIcon:E,LoadingWhite:X["a"],FullScreenIcon:K},props:{last_watch:{default:()=>""},url:{default:()=>""}},data(){return{window:{width:0,height:0},video:{height:355},showPlay:!1,muted:!1,vid:null,btn:null,currentWatch:"",seekSlider:null,currentTime:null,currentDuration:null,muteBtn:null,volumeSlider:null,fullScreenBtn:null,showOption:!1,showSpeed:!1,showQuality:!1,defaultSpeed:1,defaultQuality:22,resources:"",LoadingWhiteSuccess:!0,loadingVideo:!1,oldVolume:0,oldVolumeRange:0}},computed:{...Object(r["c"])("playVideo",["loadingNextVideo","stop_watch"]),style(){return this.color}},methods:{...Object(r["b"])("playVideo",["setLastWatch","gettingNextVideo"]),clearVideo(){},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},changeQuality(){this.LoadingWhiteSuccess=!0,this.showQuality=!1},playbackRate(t){this.defaultSpeed=t,this.showSpeed=!1,this.vid.playbackRate=t},chooseOption(t){1===t&&(this.showQuality=!0),2===t&&(this.showSpeed=!0),this.showOption=!1},showOptionTool(){this.showSpeed||this.showQuality?this.showOption=!1:this.showOption=!this.showOption,this.showSpeed=!1,this.showQuality=!1},cancel(){this.showOption=!1,this.showSpeed=!1,this.showQuality=!1},cancelOption(){this.showOption=!0,this.showSpeed=!1,this.showQuality=!1},pause(){this.showPlay=!0},lastWatchVideo(){this.$emit("lastWatchVideo",{mark:this.vid.currentTime,duration:this.vid.duration})},playPause(){this.showOption?this.showOption=!1:this.showSpeed?this.showSpeed=!1:this.showQuality?this.showQuality=!1:this.vid.paused?(this.vid.play(),this.showPlay=!1):(this.vid.pause(),this.showPlay=!0,this.lastWatchVideo())},onEnded(){let t="linear-gradient(90deg, rgb(255, 14, 9) 100%, rgb(214,214,214) 100%)";this.seekSlider.style.background=t,this.showOption=!1,this.lastWatchVideo(),this.$emit("onPlayerEnded"),this.vid="",this.currentDuration="",this.currentWatch=""},nextVideo(){this.vid="",this.currentDuration="",this.currentWatch="",this.$emit("onPlayerEnded")},previousVideo(){this.showOption=!1,this.$emit("previousVideo")},vidMute(){this.vid.muted?(this.vid.muted=!1,this.muted=!1,this.vid.volume=this.oldVolume?this.oldVolume:1,this.volumeSlider.value=this.oldVolumeRange?this.oldVolumeRange:100):(this.muted=!0,this.vid.muted=!0,this.vid.volume=0,this.volumeSlider.value=0)},setVolume(t){this.vid.volume=this.volumeSlider.value/100,this.oldVolume=this.volumeSlider.value/100,this.oldVolumeRange=t.target.value,"0"===t.target.value?(this.vid.muted=!0,this.muted=!0):this.muted=!1},toggleFullScreen(){this.vid.requestFullScreen?this.vid.requestFullScreen():this.vid.webkitRequestFullScreen?this.vid.webkitRequestFullScreen():this.vid.mozRequestFullScreen&&this.vid.mozRequestFullScreen()},timeUpdate(){let t=Math.floor(this.vid.currentTime*(100/this.vid.duration)),e=`linear-gradient(90deg, rgb(255, 14, 9) ${t}%, rgb(214,214,214) ${t}%)`;this.seekSlider.style.background=e,this.currentWatch=this.vid.currentTime;let i=Math.floor(this.vid.currentTime/60),s=Math.floor(this.vid.currentTime-60*i),o=Math.floor(this.vid.duration/60),r=Math.floor(this.vid.duration-60*o);s<10&&(s="0"+s),r<10&&(r="0"+r),i<10&&(i="0"+i),o<10&&(o="0"+o),i&&s&&(this.currentTime.innerHTML=i+":"+s+"&nbsp;"),o&&r&&(this.currentDuration.innerHTML="/&nbsp;"+o+":"+r),this.currentMinute=i},getVideo(){let t=setInterval(()=>{null!==document.getElementById("my_download")&&(clearInterval(t),this.vid=document.getElementById("my_download"),this.vid.currentTime=this.last_watch,this.vid.addEventListener("loadstart",()=>{this.loadingVideo=!0}),this.vid.addEventListener("canplaythrough",()=>{this.loadingVideo=!1}),this.vid.addEventListener("waiting",()=>{this.loadingVideo=!0}),this.btn=document.getElementById("playPauseBtn"),this.seekSlider=document.getElementById("seekSlider"),this.last_watch&&(this.vid.currentTime=this.last_watch),this.seekSlider.addEventListener("input",t=>{let e=this.vid.duration*(t.target.value/100),i=`linear-gradient(90deg, rgb(255, 14, 9) ${t.target.value}%, rgb(214,214,214) ${t.target.value}%)`;this.seekSlider.style.background=i,this.seekSlider.style.background=i,this.vid.currentTime=e,this.$emit("updateLastWatch",e),this.lastWatchVideo()},!0),this.currentTime=document.getElementById("currentTime"),this.currentDuration=document.getElementById("currentDuration"),this.muteBtn=document.getElementById("muteBtn"),this.volumeSlider=document.getElementById("volumeSlider"),this.fullScreenBtn=document.getElementById("fullScreenBtn"),this.oldVolumeRange&&(this.volumeSlider.value=this.oldVolumeRange),this.oldVolume&&(this.vid.volume=this.oldVolume),this.muted&&(this.vid.muted=!0))},200)}},mounted(){this.getVideo()},destroyed(){window.removeEventListener("resize",this.handleResize)},created(){window.addEventListener("keydown",t=>{39===t.keyCode&&(this.vid.currentTime+=10),37===t.keyCode&&(this.vid.currentTime>10&&(this.vid.currentTime-=10),this.vid.currentTime>1&&this.vid.currentTim<10&&(this.vid.currentTime-=1))},!1),window.addEventListener("resize",this.handleResize),this.handleResize(),this.window.width>1440?this.video.height=538:this.window.width<=1440?this.video.height=380:this.window.width<=1366&&(this.video.height=355)},watch:{url:function(t){t&&(this.LoadingWhiteSuccess=!1,setTimeout(()=>{this.getVideo(),this.showPlay=!1,this.LoadingWhiteSuccess=!0},1e3))}}},Z=Y,tt=(i("70fa"),Object(u["a"])(Z,l,n,!1,null,null,null)),et=tt.exports,it=i("646b"),st=i("87bb"),ot=i("33d6"),rt=i("b8df"),lt=i("3fb1");const{ipcRenderer:nt}=i("34bb");var at={name:"VideoDetail",components:{MediaPlayer:et,ViewIcon:st["a"],CloseIcon:ot["a"],IconPlayActive:rt["a"],MessageConfirm:lt["a"]},data(){return{defaultVideo:{},showConfirm:!1,last_watch:0,removeVideo:"",order:1,window:{width:0,height:0}}},computed:{...Object(r["c"])("course",["downloadDetails"])},methods:{getDefaultVideo(t="",e=null){null===e&&(e=void 0!==this.downloadDetails[0].index?this.downloadDetails[0].index:0),""===t?(this.defaultVideo=this.downloadDetails[e],this.order=this.defaultVideo.order):(this.defaultVideo=t,this.order=e);let i=this.getItem("downloaded");i=i.filter(t=>(t.course._id===this.downloadDetails[e].course._id&&(t["index"]=e),t)),this.setItem("downloaded",i),this.defaultVideo.last_watch&&void 0!==this.defaultVideo.last_watch&&(this.last_watch=this.defaultVideo.last_watch.mark)},getPathFromUrl(t){return t.split("?")[0]},lastWatchMark(t){return`background: linear-gradient(90deg, rgb(255, 14, 9) ${t}%, rgb(214, 214, 214) 0%)`},previousVideo(){for(let t=0;t<this.downloadDetails.length;t++)if(this.downloadDetails[t]._id===this.defaultVideo._id&&t>0&&void 0!==this.downloadDetails[parseInt(t)-1])return this.downloadDetails[t]["index"]=parseInt(t)-1,void this.getDefaultVideo(this.downloadDetails[parseInt(t)-1])},onPlayerEnded(){let t=this.getItem("downloaded");for(let e=0;e<this.downloadDetails.length;e++)if(this.downloadDetails[e]._id===this.defaultVideo._id&&void 0!==this.downloadDetails[parseInt(e)+1])return this.getDefaultVideo(this.downloadDetails[parseInt(e)+1]),t=t.filter(t=>t.course._id===this.downloadDetails[parseInt(e)+1].course._id?t["index"]=parseInt(e)+1:t),void this.setItem("downloaded",t)},getItem(t){if(localStorage.getItem(t))return JSON.parse(localStorage.getItem(t))},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},askForRemove(t){this.showConfirm=!0,this.removeVideo=t},confirmDelete(){this.showConfirm=!1;let t=this.downloadDetails.filter(t=>t._id!==this.removeVideo._id);this.$store.commit("course/getDownloadDetail",t),nt.send("removeDownload",this.removeVideo._id);let e=this.getItem("downloaded");e&&(e=e.filter(t=>t._id!==this.removeVideo._id),this.setItem("downloaded",e)),t.length<=0&&this.$router.push("download")},closeConfirm(){this.showConfirm=!1},nextOrder(t,e){this.getDefaultVideo(t,e)},lastWatchVideo(t){let e=Math.round(100*t.mark/t.duration);t.percentage=e,100===e&&(t.mark=0);let i=JSON.parse(localStorage.getItem("downloaded"));i=i.filter(e=>(e._id===this.defaultVideo._id&&(e.last_watch=t),e));let s=i.filter(t=>t.course._id===this.defaultVideo.course._id);this.$store.commit("course/getDownloadDetail",s),localStorage.setItem("downloaded",JSON.stringify(i))},kFormatter(t){return it["a"].kFormatter(t)},cutString(t,e){if(t)return it["a"].cutString(t,e)},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight}},destroyed(){window.removeEventListener("resize",this.handleResize)},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.getDefaultVideo()}},dt=at,ct=(i("7955"),Object(u["a"])(dt,s,o,!1,null,"baa93b32",null));e["default"]=ct.exports},"17f8":function(t,e,i){},"70fa":function(t,e,i){"use strict";i("17f8")},7955:function(t,e,i){"use strict";i("86c3")},"86c3":function(t,e,i){}}]);
//# sourceMappingURL=chunk-6e3342ae.557244b7.js.map