{"version":3,"sources":["webpack:///./src/views/Video/Video.vue?0681","webpack:///./src/views/Video/Video.vue?174b","webpack:///src/views/Video/Video.vue","webpack:///./src/views/Video/Video.vue?67cb","webpack:///./src/views/Video/Video.vue?d43e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","onScroll","videoCourses","length","_e","_l","video","key","_id","$event","goToPlayList","thumbnail","style","lastWatchMark","last_watch","percentage","teacher","photo","_v","_s","name","domProps","cutString","title","window","width","price","discount","year","is_in_cart","addCartToCart","staticRenderFns","component"],"mappings":"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","file":"js/chunk-4c13ac7c.d9581596.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home p-5 bg-gray-50 text-left\"},[(_vm.loadingVideoCourse)?_c('div',{staticClass:\"flex justify-center items-center h-screen relative -top-5\"},[_c('h1',{staticClass:\"text-sm font-semibold font-khmer_os relative -top-20\"},[_c('loading')],1)]):_c('div',{staticClass:\"overflow-y-scroll pt-3 -mt-3 \",staticStyle:{\"max-height\":\"100vh\"},attrs:{\"id\":\"videoList\"},on:{\"scroll\":_vm.onScroll}},[(_vm.videoCourses.length <= 0)?_c('div',{staticClass:\"h-screen flex justify-center items-center\"},[_c('img',{staticClass:\"w-64  mb-5 relative -top-28\",attrs:{\"src\":\"/icon/Empty/Empty.svg\"}})]):_vm._e(),_c('div',{staticClass:\"grid grid-cols-4 gap-4 mb-40\"},_vm._l((_vm.videoCourses),function(video,key){return _c('div',{key:key,staticClass:\"flex-col mb-5 relative cursor-pointer\"},[_c('div',[(video.is_new)?_c('div',{staticClass:\"absolute right-0 top-0 z-50\",staticStyle:{\"margin-top\":\"-8px\",\"margin-right\":\"-8px\"}},[_c('img',{staticClass:\"w-10\",attrs:{\"src\":\"/icon/New/New.png\"}})]):_vm._e(),_c('div',{staticClass:\"clear-both\",attrs:{\"id\":video._id}},[_c('div',{staticClass:\"relative\",on:{\"click\":function($event){return _vm.goToPlayList(video)}}},[_c('img',{staticClass:\"w-full\",attrs:{\"src\":video.thumbnail}}),(video.last_watch)?_c('input',{staticClass:\"w-full percentage cursor-default absolute bottom-0 left-0\",style:(_vm.lastWatchMark(video.last_watch.percentage)),attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"100\",\"value\":\"100\",\"step\":\"1\"}}):_vm._e()]),_c('div',{staticClass:\"absolute flex justify-start items-center font-khmer_os -bottom-1 mb-17 left-0 bg-white w-full bg-opacity-60 h-8\"},[_c('img',{staticClass:\"rounded rounded-full h-10 shadow ml-3\",attrs:{\"src\":video.teacher.photo,\"alt\":\"teacher\"}}),_c('span',{staticClass:\"text-14px ml-2\"},[_vm._v(_vm._s(video.teacher.name))])])]),_c('div',{staticClass:\"flex justify-between\"},[_c('div',{staticClass:\"flex-cols\"},[_c('div',{staticClass:\"font-khmer_os text-14px mt-3 font-semibold text-gray-700\",domProps:{\"innerHTML\":_vm._s(_vm.cutString(video.title, _vm.window.width <= 1366?30:45))},on:{\"click\":function($event){return _vm.goToPlayList(video)}}}),_c('div',{staticClass:\"flex\"},[(video.price.discount)?_c('del',{staticClass:\"mr-2\"},[_vm._v(\"$\"+_vm._s(video.price.discount))]):_vm._e(),(video.price.year)?_c('span',{staticClass:\"text-red-700\"},[_vm._v(\"$\"+_vm._s(video.price.year))]):_vm._e(),(!video.price.discount && !video.price.year)?_c('span',{staticClass:\"text-gray-400 font-khmer_os text-14px\"},[_vm._v(\" មិនគិតថ្លៃ \")]):_vm._e()])]),(!video.is_in_cart && video.price.year)?_c('div',{staticClass:\"mt-3\",on:{\"click\":function($event){return _vm.addCartToCart(video._id)}}},[_c('CartIcon',{attrs:{\"size\":20,\"fill\":\"#F3F4F6\"}})],1):_vm._e()])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"home p-5 bg-gray-50 text-left\">\r\n        <div v-if=\"loadingVideoCourse\" class=\"flex justify-center items-center h-screen relative -top-5\">\r\n            <h1 class=\"text-sm font-semibold font-khmer_os relative -top-20\">\r\n                <loading></loading>\r\n            </h1>\r\n        </div>\r\n        <div class=\"overflow-y-scroll pt-3 -mt-3 \" style=\"max-height: 100vh\" @scroll=\"onScroll\"\r\n             id=\"videoList\" v-else>\r\n            <div class=\"h-screen flex justify-center items-center\" v-if=\"videoCourses.length <= 0\">\r\n                <img src=\"/icon/Empty/Empty.svg\" class=\"w-64  mb-5 relative -top-28\"/>\r\n            </div>\r\n            <div class=\"grid grid-cols-4 gap-4 mb-40\">\r\n                <div class=\"flex-col mb-5 relative cursor-pointer\" v-for=\"(video, key) in videoCourses\" :key=\"key\">\r\n                    <div>\r\n                        <div v-if=\"video.is_new\" class=\"absolute right-0 top-0 z-50\"\r\n                             style=\"margin-top:-8px; margin-right: -8px;\">\r\n                            <img src=\"/icon/New/New.png\" class=\"w-10\"/>\r\n                        </div>\r\n                        <div :id=\"video._id\" class=\"clear-both\">\r\n                            <div @click=\"goToPlayList(video)\" class=\"relative\">\r\n                                <img :src=\"video.thumbnail\" class=\"w-full\">\r\n                                <input type=\"range\" min=\"0\" max=\"100\" value=\"100\" step=\"1\"\r\n                                       class=\"w-full percentage cursor-default absolute bottom-0 left-0\"\r\n                                       v-if=\"video.last_watch\"\r\n                                       :style=\"lastWatchMark(video.last_watch.percentage)\">\r\n                            </div>\r\n                            <div class=\"absolute flex justify-start items-center font-khmer_os -bottom-1 mb-17 left-0 bg-white w-full bg-opacity-60 h-8\">\r\n                                <img :src=\"video.teacher.photo\" alt=\"teacher\"\r\n                                     class=\"rounded rounded-full h-10 shadow ml-3\">\r\n                                <span class=\"text-14px ml-2\">{{video.teacher.name}}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"flex justify-between\">\r\n                            <div class=\"flex-cols\">\r\n                                <div class=\"font-khmer_os text-14px mt-3 font-semibold text-gray-700\"\r\n                                     v-html=\"cutString(video.title, window.width <= 1366?30:45)\"\r\n                                     @click=\"goToPlayList(video)\"></div>\r\n                                <div class=\"flex\">\r\n                                    <del class=\"mr-2\" v-if=\"video.price.discount\">${{video.price.discount}}</del>\r\n                                    <span class=\"text-red-700\" v-if=\"video.price.year\">${{video.price.year}}</span>\r\n                                    <span v-if=\"!video.price.discount && !video.price.year\"\r\n                                          class=\"text-gray-400 font-khmer_os text-14px\">\r\n                                        មិនគិតថ្លៃ\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mt-3\" v-if=\"!video.is_in_cart && video.price.year\"\r\n                                 @click=\"addCartToCart(video._id)\">\r\n                                <CartIcon :size=\"20\" fill=\"#F3F4F6\"></CartIcon>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {ipcRenderer} from 'electron'\r\n    import {mapActions, mapState} from \"vuex\"\r\n    import helper from \"./../../helper/helper\"\r\n    import Loading from \"./../../components/Loading\"\r\n    import moment from \"moment\"\r\n    import CartIcon from \"./../../components/CartIcon\"\r\n    export default{\r\n        name: \"Video\",\r\n        components: {\r\n            Loading,\r\n            CartIcon\r\n        },\r\n        data(){\r\n            return {\r\n                window: {\r\n                    width: 0,\r\n                    height: 0\r\n                },\r\n                page: 1,\r\n                noResult: false,\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('course', ['videoCourses', 'loadingVideoCourse','teacher']),\r\n            query(){\r\n                return this.$store.state.course.s\r\n            },\r\n            removedCart(){\r\n                return this.$store.state.cart.removedCart\r\n            },\r\n            gradeID(){\r\n                return this.$store.state.course.gradeID\r\n            }\r\n\r\n        },\r\n\r\n        destroyed() {\r\n            window.removeEventListener('resize', this.handleResize);\r\n        },\r\n        methods: {\r\n            ...mapActions('course', ['getVideoCourse', 'videoCoursePagination', 'afterAddToCart']),\r\n            ...mapActions('cart', ['addCart', 'getCart']),\r\n\r\n            addCartToCart(course_id){\r\n                this.addCart(course_id).then(() => {\r\n                    this.afterAddToCart(course_id)\r\n                    this.getCart()\r\n                })\r\n            },\r\n            lastWatchMark(percentage){\r\n                return `background: linear-gradient(90deg, rgb(255, 14, 9) ${percentage}%, rgb(214, 214, 214) 0%)`;\r\n            },\r\n            handleResize() {\r\n                this.window.width = window.innerWidth;\r\n                this.window.height = window.innerHeight;\r\n            },\r\n            onScroll ({target: {scrollTop, clientHeight, scrollHeight}}) {\r\n                if (scrollTop + clientHeight >= scrollHeight) {\r\n                    this.page++\r\n                    if (!this.noResult) {\r\n                        this.videoCoursePagination(this.page).then(response => {\r\n                            if (response.length <= 0) {\r\n                                this.noResult = true\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                }\r\n            },\r\n            formatDate(date){\r\n                moment.locale('km');\r\n                return moment(date).format('ll');\r\n            },\r\n            cutString(text, limit){\r\n                return helper.cutString(text, limit)\r\n            },\r\n            goToPlayList(video){\r\n                this.$store.commit(\"course/getTeacherInfo\", video.teacher)\r\n\r\n                let order = 1;\r\n\r\n                if (video.last_watch && video.last_watch.order) {\r\n                    order = video.last_watch.order\r\n                }\r\n\r\n                this.$router.push({\r\n                    name: 'course-detail',\r\n                    params: {videoId: video._id, order: order, courseId: video._id}\r\n                })\r\n            },\r\n\r\n        },\r\n        created(){\r\n            window.addEventListener('resize', this.handleResize);\r\n            this.handleResize();\r\n\r\n            this.getVideoCourse()\r\n            ipcRenderer.on('resetGrade', () => {\r\n                this.page = 1\r\n            })\r\n        },\r\n        watch: {\r\n            query: function () {\r\n                this.getVideoCourse()\r\n            },\r\n            gradeID: function () {\r\n                this.getVideoCourse()\r\n            },\r\n            removedCart: function (course_id) {\r\n                this.afterAddToCart(course_id)\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style>\r\n    #videoList::-webkit-scrollbar {\r\n        width: 5px !important;\r\n    }\r\n\r\n    #videoList::-webkit-scrollbar-track {\r\n        -webkit-box-shadow: inset 0 0 0px rgba(0, 0, 0, 0.3) !important;\r\n    }\r\n\r\n    #videoList::-webkit-scrollbar-thumb {\r\n        -webkit-box-shadow: inset 0 0 0px rgba(0, 0, 0, 0.5) !important;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=93f46492&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}